(window.webpackJsonp=window.webpackJsonp||[]).push([[119],{"0Vc4":function(e,n){var t={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"whisperThreadsMessageEdge"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"WhisperMessageEdge"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nonce"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"editedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deletedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"to"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}],loc:{start:0,end:234}};t.loc.source={body:"fragment whisperThreadsMessageEdge on WhisperMessageEdge {\ncursor\nnode {\nid\nnonce\nsentAt\neditedAt\ndeletedAt\nfrom {\nid\n__typename\n}\ncontent {\ncontent\nemotes {\nid\nemoteID\nsetID\nfrom\nto\n__typename\n}\n__typename\n}\n__typename\n}\n__typename\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=t},AELI:function(e,n,t){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Whispers_Whispers_UserWhisperThreads"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"Cursor"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"whisperThreads"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"currentUserWhisperThreadsNode"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:273}};i.loc.source={body:'#import "./current-user-whisper-threads-node-fragment.gql"\nquery Whispers_Whispers_UserWhisperThreads($cursor: Cursor) {\ncurrentUser {\nid\nlogin\nwhisperThreads(first: 10 after: $cursor) {\nedges {\ncursor\nnode {\n...currentUserWhisperThreadsNode\n}\n__typename\n}\n__typename\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};i.definitions=i.definitions.concat(t("K/MK").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!r[n]&&(r[n]=!0,!0)})));var a={};function d(e,n){for(var t=0;t<e.definitions.length;t++){var i=e.definitions[t];if(i.name&&i.name.value==n)return i}}i.definitions.forEach((function(e){if(e.name){var n=new Set;!function e(n,t){if("FragmentSpread"===n.kind)t.add(n.name.value);else if("VariableDefinition"===n.kind){var i=n.type;"NamedType"===i.kind&&t.add(i.name.value)}n.selectionSet&&n.selectionSet.selections.forEach((function(n){e(n,t)})),n.variableDefinitions&&n.variableDefinitions.forEach((function(n){e(n,t)})),n.definitions&&n.definitions.forEach((function(n){e(n,t)}))}(e,n),a[e.name.value]=n}})),e.exports=i,e.exports.Whispers_Whispers_UserWhisperThreads=function(e,n){var t={kind:e.kind,definitions:[d(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=a[n]||new Set,r=new Set,s=new Set;for(i.forEach((function(e){s.add(e)}));s.size>0;){var o=s;s=new Set,o.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){s.add(e)})))}))}return r.forEach((function(n){var i=d(e,n);i&&t.definitions.push(i)})),t}(i,"Whispers_Whispers_UserWhisperThreads")},AnJh:function(e,n,t){"use strict";t.r(n);var i=t("/MKj"),r=t("XDQu"),a=t("CzFK"),d=t("szP+"),s=t("l1Uh"),o=t("mrSG"),u=t("w09P"),c=t("q1tI"),l=t("0dmp"),m=t("Uy53"),h=t("/7QA"),f=t("ZS2+"),p=t("yR8l"),v=t("geRD"),k=t("AELI"),g=t("soB4"),D=t("zOU0"),I=t("PrJw"),_=f.a.wrap((function(){return Promise.all([t.e(0),t.e(118)]).then(t.bind(null,"YPA1"))}),"ThreadsDisplay",{failSilently:!0,placeholder:null}),y=function(e){function n(n){var t=e.call(this,n)||this;return t.logger=h.k.withCategory("whispers"),t.getThreadsById=Object(m.a)((function(e){return Object(D.a)(e)})),t.getThreadsFromData=Object(m.a)((function(e){return e&&e.whisperThreads&&e.whisperThreads.edges.map((function(e){return e.node}))||[]})),t.archiveThread=function(e){var n=t.threadsByID[e];n&&(t.props.closeThread(e),t.props.data.currentUser&&Object(I.c)(e),Object(g.a)(n))},t.handleThreadDataReport=function(e,n){t.threadsByID[e]||Object(v.j)(k,{cursor:void 0},(function(e){return e.currentUser&&e.currentUser.whisperThreads?u(e,(function(e){return e.currentUser.whisperThreads.edges}),(function(e){return Object(o.__spreadArrays)([{cursor:"0",node:Object(o.__assign)(Object(o.__assign)({},n),{isArchived:!1}),__typename:"WhisperThreadEdge"}],e)})):e}),void 0,t.props.client)},t.state={renderError:!1},t}return Object(o.__extends)(n,e),n.prototype.componentDidCatch=function(e,n){var t=this;this.setState({renderError:!0},(function(){h.p.stats.recordComponentError("Whispers"),t.logger.errorAndReport(e,"A unhandled exception occurred in the component hierarchy",{info:n})}))},n.prototype.render=function(){var e=!this.props.openedThreads||0===this.props.openedThreads.length;return this.props.data.currentUser&&this.props.data.currentUser.id&&!this.state.renderError&&this.props.isVisible&&!e?c.createElement(_,{openedThreads:this.props.openedThreads,currentUserID:this.props.data.currentUser.id,reportThreadData:this.handleThreadDataReport,archiveThread:this.archiveThread,theatreModeEnabled:this.props.theatreModeEnabled,rightColumnExpanded:this.props.rightColumnExpanded&&this.props.rightColumnPositionedBeside,uiContext:this.props.uiContext}):null},Object.defineProperty(n.prototype,"threadsByID",{get:function(){var e=this.getThreadsFromData(this.props.data.currentUser);return this.getThreadsById(e)},enumerable:!0,configurable:!0}),n=Object(o.__decorate)([l.b,Object(p.c)(k,{props:function(e){return Object(o.__assign)({},e)}})],n)}(c.Component);var S=Object(i.b)((function(e){return{isVisible:Object(r.c)(e),rightColumnExpanded:e.ui.rightColumnExpanded,rightColumnPositionedBeside:e.ui.rightColumnPositionedBeside,theatreModeEnabled:e.ui.theatreModeEnabled,openedThreads:e.whispers.display.openedIDs.map((function(n){return Object(d.b)(e,n)}))}}),(function(e){return{openThread:function(n){return e(a.l(n,Object(s.a)()))},closeThread:function(n){return e(a.h(n,Object(s.a)()))}}}))(y);t.d(n,"WhisperThreadsBar",(function(){return S})),t.d(n,"PublicProps",(function(){}))},CzFK:function(e,n,t){"use strict";t.d(n,"f",(function(){return i})),t.d(n,"b",(function(){return r})),t.d(n,"c",(function(){return a})),t.d(n,"d",(function(){return d})),t.d(n,"e",(function(){return s})),t.d(n,"g",(function(){return o})),t.d(n,"a",(function(){return u})),t.d(n,"l",(function(){return c})),t.d(n,"h",(function(){return l})),t.d(n,"i",(function(){return m})),t.d(n,"j",(function(){return h})),t.d(n,"m",(function(){return f})),t.d(n,"k",(function(){return p})),t.d(n,"n",(function(){return v}));var i="whispers.THREAD_OPENED",r="whispers.THREAD_CLOSED",a="whispers.THREAD_COLLAPSED",d="whispers.THREAD_EXPANDED",s="whispers.THREAD_FOCUSED",o="whispers.THREAD_UNFOCUSED",u="whispers.CONTENT_RESIZED";function c(e,n){return{type:i,data:e,contentWidth:n}}function l(e,n){return{type:r,threadID:e,contentWidth:n}}function m(e,n){return{type:a,threadID:e,contentWidth:n}}function h(e,n){return{type:d,threadID:e,contentWidth:n}}function f(e){return{type:u,contentWidth:e}}function p(e,n){return{type:s,threadID:e,contentWidth:n}}function v(e,n){return{type:o,threadID:e,contentWidth:n}}},"K/MK":function(e,n,t){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"currentUserWhisperThreadsNode"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"WhisperThread"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participants"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"chatColor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"70"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"spamInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"threadListItemSpamInfo"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"messages"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"20"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"whisperThreadsMessageEdge"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"userLastMessageRead"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"isMuted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isArchived"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"unreadMessagesCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}],loc:{start:0,end:515}};i.loc.source={body:'#import "twilight/features/whispers/components/thread-list-item/thread-list-item-spam-info-fragment.gql"\n#import "./whisper-threads-message-edge-fragment.gql"\nfragment currentUserWhisperThreadsNode on WhisperThread {\nid\nparticipants {\nid\nchatColor\ndisplayName\nprofileImageURL(width: 70)\nlogin\n__typename\n}\nspamInfo {\n...threadListItemSpamInfo\n}\nmessages(first: 20) {\nedges {\n...whisperThreadsMessageEdge\n}\n__typename\n}\nuserLastMessageRead {\nid\nsentAt\n__typename\n}\nisMuted\nisArchived\nunreadMessagesCount\n__typename\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function a(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!r[n]&&(r[n]=!0,!0)}))}i.definitions=i.definitions.concat(a(t("eFVV").definitions)),i.definitions=i.definitions.concat(a(t("0Vc4").definitions)),e.exports=i},WSPL:function(e,n,t){"use strict";t.d(n,"a",(function(){return i})),t.d(n,"b",(function(){return r}));var i="whisperNotifications.WHISPER_THREAD_NOTIFIED";function r(e,n,t){return{type:i,threadID:e,afterMessageID:t,content:n}}},Ya72:function(e,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Thread_ArchiveThread"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateWhisperThreadInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateWhisperThread"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"thread"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isArchived"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:132}};t.loc.source={body:"mutation Thread_ArchiveThread($input: UpdateWhisperThreadInput!) {\nupdateWhisperThread(input: $input) {\nthread {\nid\nisArchived\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e,n){for(var t=0;t<e.definitions.length;t++){var i=e.definitions[t];if(i.name&&i.name.value==n)return i}}t.definitions.forEach((function(e){if(e.name){var n=new Set;!function e(n,t){if("FragmentSpread"===n.kind)t.add(n.name.value);else if("VariableDefinition"===n.kind){var i=n.type;"NamedType"===i.kind&&t.add(i.name.value)}n.selectionSet&&n.selectionSet.selections.forEach((function(n){e(n,t)})),n.variableDefinitions&&n.variableDefinitions.forEach((function(n){e(n,t)})),n.definitions&&n.definitions.forEach((function(n){e(n,t)}))}(e,n),i[e.name.value]=n}})),e.exports=t,e.exports.Thread_ArchiveThread=function(e,n){var t={kind:e.kind,definitions:[r(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var a=i[n]||new Set,d=new Set,s=new Set;for(a.forEach((function(e){s.add(e)}));s.size>0;){var o=s;s=new Set,o.forEach((function(e){d.has(e)||(d.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return d.forEach((function(n){var i=r(e,n);i&&t.definitions.push(i)})),t}(t,"Thread_ArchiveThread")},eFVV:function(e,n){var t={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"threadListItemSpamInfo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"WhisperSpamInfo"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"lastMarkedNotSpamAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"likelihood"},arguments:[],directives:[]}]}}],loc:{start:0,end:85}};t.loc.source={body:"fragment threadListItemSpamInfo on WhisperSpamInfo {\nlastMarkedNotSpamAt\nlikelihood\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=t},l1Uh:function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"a",(function(){return d}));var i=null,r=1e3;function a(e){i=e}function d(){return i?+window.getComputedStyle(i).getPropertyValue("width").replace("px",""):r}},soB4:function(e,n,t){"use strict";t.d(n,"a",(function(){return u}));var i=t("mrSG"),r=t("w09P"),a=t("/7QA"),d=t("geRD"),s=t("AELI"),o=t("Ya72");function u(e){var n=e.id,t=Object(d.b)({threadID:n,isArchived:!0},{updateWhisperThread:{thread:{__typename:"WhisperThread",id:n,isArchived:!0},__typename:"UpdateWhisperThreadPayload"}});e.lastMessage?a.p.apollo.client.mutate(Object(i.__assign)({mutation:o},t)):Object(d.j)(s,{},(function(e){var t,a;return(null===(a=null===(t=null==e?void 0:e.currentUser)||void 0===t?void 0:t.whisperThreads)||void 0===a?void 0:a.edges)?r(e,(function(e){return e.currentUser.whisperThreads.edges}),(function(e){var t=e.find((function(e){return e.node.id===n})),r=e.filter((function(e){return e.node.id!==n}));return t?Object(i.__spreadArrays)([{cursor:"0",node:Object(i.__assign)(Object(i.__assign)({},t.node),{isArchived:!0}),__typename:"WhisperThreadEdge"}],r):r})):e}))}},"szP+":function(e,n,t){"use strict";var i=t("ANjH"),r=t("/7QA"),a=t("mrSG"),d=t("w09P"),s=t("CzFK"),o=234,u=310;function c(e){if(0===e.openedIDs.length)return 0;for(var n=0,t=0,i=e.openedIDs;t<i.length;t++){var r=i[t],a=e.byID[r];a.hidden||(n+=a.collapsed?o:u)}return n}function l(e){var n=Object(a.__spreadArrays)(e.openedIDs),t=n.pop();return t&&e.focusedID===t&&n.length>0&&(n.pop(),n.push(t)),d(e,(function(e){return e.openedIDs}),(function(){return n}))}function m(e,n){var t=e.orderedIDs.filter((function(n){return!e.openedIDs.includes(n)}));return t.length>0?h(e,t[0],n):e}function h(e,n,t){var i=t-c(e),r=Object(a.__assign)({},e);return r.openedIDs.includes(n)||(i<u&&(r=l(r)),r=d(r,(function(e){return e.openedIDs}),(function(e){return e.push(n),e}))),r}function f(e,n,t){if(!e.byID[n])return e;var i=d(e,(function(e){return e.byID}),(function(e){return e[n].collapsed=!1,e}));return i.focusedID=n,c(e)>t&&(i=l(i)),i}var p=t("WSPL");t.d(n,"b",(function(){return k})),t.d(n,"a",(function(){return D}));var v=Object(i.c)({display:function(e,n){switch(void 0===e&&(e={byID:{},orderedIDs:[],openedIDs:[],focusedID:""}),n.type){case s.f:var t=(r=Object(a.__assign)({},e)).byID[n.data.threadID],i=r.openedIDs.includes(n.data.threadID);return t||(r=d(r,(function(e){return e.orderedIDs}),(function(e){return e.push(n.data.threadID),e})),r=d(r,(function(e){return e.byID}),(function(e){return e[n.data.threadID]=n.data,e}))),r.openedIDs.includes(n.data.threadID)&&!r.byID[n.data.threadID].hidden||(r.byID[n.data.threadID].hidden=n.data.hidden),n.data.ignoreCollapseIfOpen||n.data.collapsed||(r.focusedID=n.data.threadID),r=h(r,n.data.threadID,n.contentWidth),(!i||i&&!n.data.ignoreCollapseIfOpen)&&(n.data.collapsed||(r=f(r,n.data.threadID,n.contentWidth))),r;case s.b:if(!e.byID[n.threadID])return e;var r=d(e,(function(e){return e.byID}),(function(e){return delete e[n.threadID],e}));return r=d(r,(function(e){return e.orderedIDs}),(function(e){return e.filter((function(e){return e!==n.threadID}))})),r=d(r,(function(e){return e.openedIDs}),(function(e){return e.filter((function(e){return e!==n.threadID}))})),e.focusedID===n.threadID&&(r.focusedID=r.openedIDs[0]),m(r,n.contentWidth);case s.c:return e.byID[n.threadID]?(e.focusedID===n.threadID&&(e.focusedID=""),d(e,(function(e){return e.byID}),(function(e){return e[n.threadID].collapsed=!0,e}))):e;case s.d:return f(e,n.threadID,n.contentWidth);case s.e:return d(e,(function(e){return e.focusedID}),(function(){return n.threadID}));case s.g:return d(e,(function(e){return e.focusedID}),(function(e){return e===n.threadID?"":e}));case s.a:var o=c(e);if(o>n.contentWidth){if(e.openedIDs.length<=1)return e;for(var p=Object(a.__assign)({},e);o>n.contentWidth&&p.openedIDs.length>1;)o=c(p=l(p));return p}if(n.contentWidth-o>=u){var v=Math.floor((n.contentWidth-o)/u),k=Math.min(v,e.orderedIDs.length-e.openedIDs.length);if(0===k)return e;p=Object(a.__assign)({},e);for(var g=0;g<k;g++)if((p=m(p,n.contentWidth)).openedIDs.length>1)for(var D=p.openedIDs,I=D.length,_=0,y=p.orderedIDs;_<y.length;_++){var S=y[_];if(D[I-1]===S){var N=D.splice(I-2,1);D.push(N[0]);break}if(D[I-2]===S)break}return p}return e;default:return e}},notifications:function(e,n){switch(void 0===e&&(e={byThreadID:{}}),n.type){case p.a:return e.byThreadID[n.threadID]?d(e,(function(e){return e.byThreadID[n.threadID]}),(function(e){return Object(a.__spreadArrays)([{threadID:n.threadID,afterMessageID:n.afterMessageID,content:n.content}],e)})):d(e,(function(e){return e.byThreadID}),(function(e){var t;return Object(a.__assign)(((t={})[n.threadID]=[{threadID:n.threadID,afterMessageID:n.afterMessageID,content:n.content}],t),e)}));default:return e}}});function k(e,n){return e.whispers?e.whispers.display.byID[n]:null}var g=[];function D(e,n){return e.whispers.notifications.byThreadID[n]||g}r.p.store.registerReducer("whispers",v)},zOU0:function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));var i=t("mrSG"),r=function(e){for(var n={},t=0,r=e;t<r.length;t++){var d=r[t],s=a(d);d.id&&s&&(n[d.id]=Object(i.__assign)({},s))}return n},a=function(e){return e.messages?{id:e.id,lastMessage:e.messages.edges.map((function(e){return e.node})).find((function(e){return!e.deletedAt}))||null,messageHistory:e.messages.edges.map((function(e){return e.node})).slice(0,-1),unreadMessagesCount:e.unreadMessagesCount,participants:e.participants.map((function(e){return e?Object(i.__assign)(Object(i.__assign)({},e),{displayBadges:[],self:null}):null})),spamInfo:e.spamInfo,muted:e.isMuted,archived:e.isArchived}:null}}}]);